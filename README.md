# 스프링 jpa 게시판

### 목표
 
  1. jpa에 적응을 하기 위해서 블로그를 만드는 것을 목표로 한다. 

  2. 기능이 다 구현된 뒤에는 ci/cd 까지 해본다.

  3. TDD를 배우기 위해서 각 레이어마다 테스트 코드를 작성을 하고 테스트 커버리지를 80%로 한다.

  4. 기능을 단순히 만드는 것에 집착하지 않고 관련된 기술에 대해서 공부하기.

  5. 완성된 프로젝트를 배포후 Ci/Cd를 구축해보기.


### 개발 환경

- Back-end: Java17, SpringBoot 2.6.6, Jpa , Redis , SpringSecurity , QueryDsl , Jwt

- DB: MariaDB

- Build: Gradle

- Front-end: TheymLeaf(추후 SPA로 변경해보기.),JQuery 

- TestTool: postman, Mockito, Junit5

- Deploy: Aws ,Github-Action

### 주요 기능

| 관리자 페이지 | 설명                                            |
|---------|-----------------------------------------------|
| 회원관리    | 블로그에 가입한 회원을  관리할 수 있습니다. (회원등급 변경기능)         |
| 게시글 관리  | 회원이 작성한 게시글을 관리할 수 있습니다. (비밀글 전환 및 게시글 선택 삭제) |
| 댓글 관리   | 회원이 작성한 댓글을 관리할 수 있습니다. (댓글 선택 삭제)            |
| 카테고리 관리 | 만들어 놓은 카테고리를 관리할 수 있습니다. (카테고리 추가 및 삭제)       |
| 방문자 관리  | 로그인을 한 회원의 방문을 통계로 관리할 수 있습니다.                |

| 회원 페이지      | 설명                                               |
|-------------|--------------------------------------------------|
| 회원가입 및 로그인  | 회원 가입 및 로그인을 할 수 있습니다.                           |
| 게시글 작성      | 게시글을 작성 및 비밀글을 작성할 수 있고 파일첨부 및 해시태그를 작성할 수 있습니다. |
| 게시글 검색 및 정렬 | 작성한 게시글을 검색할 수 있고,조회수,좋아요,작성일순으로 정렬을 할 수 있습니다.   |
| 댓글 작성 및 삭제  | 작성한 게시글에 댓글을 작성 및 삭제를 할 수 있습니다.                  |
| 게시글 좋아요     | 작성한 게시글에 좋아요를 추가,삭제를 할 수 있습니다.                   |
| 게시글 스크랩     | 타회원이 작성한 게시글을 스크랩을 할 수 있습니다.                     |
| 마이 페이지      | 회원이 작성한 글,댓글 및 스크랩을 한 게시글을 확인할 수 있습니다.           |
| 실시간 알림      | 타회원이 좋아요,댓글을 작성하면 실시간 알림으로 확인을 할 수 있습니다.         |

### 프로젝트 구조 (아키텍쳐 구조)

![jpaBlog-Arc](https://github.com/well0924/jpapractice/assets/89343159/a5d6ebe6-3644-4417-ada8-8eac46058204)

### Api 명세서

[api 명세서](https://documenter.getpostman.com/view/18344373/2s93JqRQ1U)

### ERD

![jpaBlog-ERD](https://github.com/well0924/jpapractice/assets/89343159/9bb94c5a-b603-41a7-9d8f-58f979655188)


### 트러블 슈팅 및 구현 

1.[jwt을 사용한 로그인 구현](https://www.notion.so/Jwt-e70c536c4bf7414a97ab928b28760d8d)

2.[Redis를 활용한 캐시적용으로 응답속도 증가.](https://www.notion.so/Redis-0fd3ad8e6b1f457097bfd59a9b09fab5)

3.[Jpql에서 QueryDsl로 변경](https://www.notion.so/Jpql-QueryDsl-481d9f34d9244eb791e005ecc1e92a38)

4.[게시글 조회수에서 발생한 동시성 이슈](https://www.notion.so/2d0c6ea066ff43cbae599b361651f370)

5.[SSE 를 활용해서 실시간 알림기능 구현하기.](https://www.notion.so/SSE-fd3abb3cc8b34aaf8f34046177da0637)

6.[Github Action으로 ci/cd 구축하기.]()

### 주요 로직

jwt 로그인 로직

![jwt 로그인 순서 drawio](https://github.com/well0924/jpapractice/assets/89343159/4ed2d159-0afd-48ea-a77b-6f578b810e4d)


Redis 캐시 로직

![redis 캐시적용 drawio](https://github.com/well0924/jpapractice/assets/89343159/00bbb763-0385-42dc-bb6d-cf24d5ec10a4)

### 소감

- 처음에 jpa를 배운다고 해서 가볍게 게시판 crud기능만 붙여서 몇 주만에 끝낼 생각이었는데 개별적으로 
  공부한 내용을 붙이면서 제작기간이 기하급수적으로 늘어났다. 지난 번에 만들었던 포트폴리오에서도 만드는데 
  기간이 오래걸렸었는데 이 부분에 대해서는 반성을 해야 되는 부분이다.


- 이전에는 단순히 기능을 구현하기 위해서만 코드를 작성을 했는데 **테스트 코드**를 알게 되면서 
  기능을 구현하기 전에 내가 의도한대로 코드가 제대로 구현이 되는지 그리고 에러가 발생했을 경우 
  의도한 에러가 나는지를 확인을 해서 성공하는 케이스와 실패를 하는 케이스를 구별을 해서 좀더 
  견고하게 코드를 작성을 할 수 있었습니다.


- Mybatis에서는 쿼리에 매핑만 하면 별 어려움 없이 진행이 되었지만 엔티티간의 연관관계를 이해하면서 
  적용해야 되는 점에서 마냥 쉬워보였던 JPA였는데 생각보다 데이터베이스의 공부가 많이 부족한 점이 많아서 
  데이터 베이스 공부를 해야겠다는 생각이 많이 들었고 jpa를 사용하면서 스트림을 사용하게 되었는데 사용을 
  많이 해보지 않아서 처음에 코드를 작성할 때 많이 애를 먹어서 자바공부를 하는 좋은 계기 되었습니다.


- AWS와 CI/CD 파이프라인 구축 프로세스를 통해 추후 유지 및 보수에 용이한 서버 아키텍쳐를 구축함으로써 
  무중단 배포와 같이 서버 환경 운영에서의 이슈들을 해결할 수 있는 역량을 기를 수 있게 되었습니다.