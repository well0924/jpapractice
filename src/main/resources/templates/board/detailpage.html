<!DOCTYPE html>
<html 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/mainlayout}">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<title>게시글 조회화면</title>
</head>
<body>
<th:block layout:fragment= "contents">
<form>
  <fieldset>
    <legend>글 조회</legend>
    <input type="hidden" id="boardid" name="boardId" th:value="${detail.boardId}">
    <div>
        <label for="categoryName" class="form-label mt-4">카테고리</label>
        <p id="categoryName" th:text="${detail.categoryName}"></p>
    </div>
    <div class="form-group">
      <label for="boardTitle" class="form-label mt-4">글 제목</label>
      <p id="boardTitle">[[${detail.boardTitle}]]</p>
    </div>
    <div class="form-group">
      <label for="boardAuthor" class="form-label mt-4">글 작성자</label>
      <p id="boardAuthor">[[${detail.boardAuthor}]]</p>
    </div>
      <section class="mb-5"></section>
    <div class="form-group">
      <label for="boardContents" class="form-label mt-4">글 내용</label>
      <p id="boardContents">[[${detail.boardContents}]]</p>
    </div>
    <div class="form-group">
      <label for="boardContents" class="form-label mt-4">조회수</label>
      <p>[[${detail.readCount}]]</p>
    </div>
    <div class="form-group">
       <label for="board_like">
           <button id="board_like" onclick="addDuplicatedLike()">좋아요</button>
           </br>
           <div id="likecount"></div>
       </label>
    </div>
    <div class="form-group">
        <label for="board_file" class="form-label mt-4">파일첨부</label>
        <th:block th:each="attachfile:${fileList}">
            </br>
            <a th:href="@{|/api/file/${attachfile.originFileName}|}">
                <span id="board_file" th:text="${attachfile.originFileName}"/>
            </a>
        </th:block>
    </div>
    <!--게시글 이전글/다음글-->
      <div class="list-group" th:each="board:${nextPrevious}">
          <div th:if="${#lists.size(nextPrevious) == 1 and board.boardId > detail.boardId}">
              첫번째 글입니다.
          </div>
          <div th:if="${board.boardId < detail.boardId}">
              <a th:href="@{'/page/board/detail/'+ ${board.boardId}}" class="list-group-item list-group-item-action">
                  <span style="font-weight: bold;">이전글</span> │
                  <div>
                      <span style="color: blue;">[[${board.getBoardTitle()}]]</span>
                  </div>
              </a>
          </div>
          <div th:if="${board.boardId > detail.boardId}">
              <a th:href="@{'/page/board/detail/'+${board.boardId}}" class="list-group-item list-group-item-action">
                  <span style="font-weight: bold;">다음글</span> │
                  <div>
                      <span style="color: blue;">[[${board.getBoardTitle()}]]</span>
                  </div>
              </a>
          </div>
          <div th:if="${#lists.size(nextPrevious) == 1 and board.boardId < detail.boardId}">
              <p>마지막 글입니다.</p>
          </div>
      </div>
    <button type="button" class="btn btn-primary" onclick='listpage()'>목록</button>
    <button type="button" class="btn btn-primary" onclick='modifypage()'>수정페이지</button>
  </fieldset>
</form>
<br>
<div class="card mb-2">
    <div class="card-header bg-light">
        <i class="fa fa-comment fa"></i> 댓글
    </div>
    <div class="card-body">
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <label for="replycontents">댓글 내용</label>
                <textarea class="form-control" id="replycontents" name="replyContents" rows="3"></textarea>
                <div id="valid_replyContents"></div>
                <button type="button" class="btn btn-dark mt-3" onclick="javascript:replyInsert();">post reply</button>
            </li>
        </ul>
    </div>
</div>
<!--jquery-->
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" th:src="@{/js/board/boarddetail.js}"></script>
<script type="text/javascript" th:src="@{/js/reply/reply.js}"></script>
<!-- 댓글 화면 -->
<div class="container">
    <div id="replies"></div>
</div>
</th:block>
</body>
</html>